(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{YVtV:function(e,t,a){"use strict";a.r(t);var n=a("NTxs"),r=a.n(n),s=a("smUt"),c=a.n(s),o=a("NTBb"),i=a.n(o),u=a("7Qib"),p=a("3eXy"),d=a("3Unq"),l=a("jJIE"),f=a.n(l),y=p["a"].querystaff,x=p["a"].movestaff,h=p["a"].importstaff,w=p["a"].addstaff,m=p["a"].editstaff,b=p["a"].resignstaff,k=p["a"].departTree,v=p["a"].download,g=p["a"].logoutUser;t["default"]=i()(d["b"],{namespace:"staff",state:{currentItem:{},modalVisible:!1,deptmodalVisible:!1,importmodalVisible:!1,loadingimport:!1,modalType:"create",selectedRowKeys:[],indeterminate:!1,checkAll:!1,departdata:[],staff_id:"",filter:{},page:{page:1,per_page:10},link_count:{link_count:0,unlink_count:0}},subscriptions:{setup:function(e){var t=e.dispatch,a=e.history;a.listen(function(e){Object(u["g"])("/user",e.pathname)&&(t({type:"defSuccess",payload:{filter:{},page:{page:1,per_page:10}}}),t({type:"query"}),t({type:"depart"}))})}},effects:{query:r.a.mark(function e(t,a){var n,s,o,i,u,p,d,l,f,x;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,void 0===n?{}:n,s=a.call,o=a.put,i=a.select,e.next=4,i(function(e){return e.staff});case 4:return u=e.sent,p=u.filter,d=u.page,e.next=9,s(y,c()({},p,d));case 9:if(l=e.sent,0!=l.code){e.next=19;break}return f=l.data.result.map(function(e){return e.staff_id}),x={link_count:l.data.link_count,unlink_count:l.data.unlink_count},e.next=15,o({type:"defSuccess",payload:{link_count:x}});case 15:return e.next=17,o({type:"querySuccess",payload:{applyid:f,list:l.data,selectedRowKeys:[],pagination:{current:Number(d.page)||1,pageSize:Number(d.per_page)||10,total:l.data.total}}});case 17:return e.next=19,o({type:"defSuccess",payload:{selectedRowKeys:[],indeterminate:!1,checkAll:!1}});case 19:case"end":return e.stop()}},e,this)}),depart:r.a.mark(function e(t,a){var n,s,c,o,i,p;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,s=void 0===n?{}:n,c=a.call,o=a.put,e.next=4,c(k,s);case 4:if(i=e.sent,0!=i.code){e.next=9;break}return p=Object(u["b"])(i.data,"dept_id","pid"),e.next=9,o({type:"defSuccess",payload:{departdata:p}});case 9:case"end":return e.stop()}},e,this)}),resign:r.a.mark(function e(t,a){var n,s,c,o;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,s=a.call,c=a.put,a.select,e.next=4,s(b,n);case 4:if(o=e.sent,0!=o.code){e.next=10;break}return e.next=8,c({type:"query"});case 8:e.next=11;break;case 10:throw o;case 11:case"end":return e.stop()}},e,this)}),movedept:r.a.mark(function e(t,a){var n,s,o,i,u,p,d;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,s=a.call,o=a.put,i=a.select,e.next=4,i(function(e){return e.staff});case 4:return u=e.sent,p=u.staff_id,e.next=8,s(x,c()({},n,{staff_ids:p}));case 8:if(d=e.sent,0!=d.code){e.next=16;break}return e.next=12,o({type:"hideModal",payload:{deptmodalVisible:!1}});case 12:return e.next=14,o({type:"query"});case 14:e.next=17;break;case 16:throw d;case 17:case"end":return e.stop()}},e,this)}),import:r.a.mark(function e(t,a){var n,s,c,o;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,s=a.call,c=a.put,e.next=4,s(h,n);case 4:if(o=e.sent,0!=o.code){e.next=10;break}return e.next=8,c({type:"query"});case 8:e.next=11;break;case 10:throw o;case 11:case"end":return e.stop()}},e,this)}),create:r.a.mark(function e(t,a){var n,s,c,o;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,s=a.call,c=a.put,e.next=4,s(w,n.val);case 4:if(o=e.sent,0!=o.code){e.next=12;break}return e.next=8,c({type:"hideModal",payload:{modalVisible:!1}});case 8:return e.next=10,c({type:"query"});case 10:e.next=13;break;case 12:throw o;case 13:case"end":return e.stop()}},e,this)}),signOut:r.a.mark(function e(t,a){var n,s;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.payload,n=a.call,a.put,e.next=4,n(g);case 4:if(s=e.sent,0!=s.code){e.next=10;break}f.a.remove("name"),u["j"].push({pathname:"/login"}),e.next=11;break;case 10:throw s;case 11:case"end":return e.stop()}},e,this)}),update:r.a.mark(function e(t,a){var n,s,c,o;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,a.select,s=a.call,c=a.put,e.next=4,s(m,n.val);case 4:if(o=e.sent,0!=o.code){e.next=17;break}return e.next=8,c({type:"hideModal",payload:{modalVisible:!1}});case 8:if(1!=n.type){e.next=13;break}return e.next=11,c({type:"signOut"});case 11:e.next=15;break;case 13:return e.next=15,c({type:"query"});case 15:e.next=18;break;case 17:throw o;case 18:case"end":return e.stop()}},e,this)}),download:r.a.mark(function e(t,a){var n,s,c,o,i;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.payload,a.select,n=a.call,a.put,e.next=4,n(v);case 4:if(s=e.sent,!s){e.next=11;break}c=new Blob([s]),o="\u6d4b\u8bd5\u8868\u683c123.xls","download"in document.createElement("a")?(i=document.createElement("a"),i.download=o,i.style.display="none",i.href=URL.createObjectURL(c),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)):navigator.msSaveBlob(c,o),e.next=12;break;case 11:throw s;case 12:case"end":return e.stop()}},e,this)})},reducers:{showModal:function(e,t){var a=t.payload;return c()({},e,a)},hideModal:function(e,t){var a=t.payload;return c()({},e,a)},defSuccess:function(e,t){var a=t.payload;return c()({},e,a)}}})}}]);